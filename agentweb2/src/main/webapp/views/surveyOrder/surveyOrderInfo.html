<!-- 导航URL -->
<div class="row wrapper border-bottom white-bg page-heading">
	<div class="col-md-12">
		<ol class="breadcrumb">
			<li><a href="#/service/addService">主页</a></li>
			<li><a>调单管理</a></li>
			<li class="active"><strong>调单详情</strong></li>
		</ol>
	</div>
</div>
<style>
	.templateStyle{
		margin-left:20px;
		margin-top:7px;
		float: left;
	}
</style>

<!-- 主要内容 -->
<div class="wrapper wrapper-content animated fadeIn" ng-app
	ng-controller="surveyOrderInfoCtrl" ng-init="orderInfo()" >
	<form class="form-horizontal" id="form1" name="horizontal">
		<div class="row">
			<div class="col-lg-12">
				<div class="panel-body ibox float-e-margins">

					<div class="ibox-title">
						<h5>调单信息</h5>
					</div>
					<div class="ibox-content">

                        <div class="form-group">
                            <label class="col-sm-2 control-label">商户编号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.merchantNo"></p></div>
                            <label class="col-sm-2 control-label">商户名称：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.merchantName"></p></div>
                            <label class="col-sm-2 control-label">商户手机号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.mobilephone"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">订单编号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transOrderNo"></p></div>
                            <label class="col-sm-2 control-label">系统参考号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.acqReferenceNo"></p></div>
                            <label class="col-sm-2 control-label">交易流水号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.serialNo"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">交易卡号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transAccountNo"></p></div>
                            <label class="col-sm-2 control-label">发卡行：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.bankName"></p></div>
                            <label class="col-sm-2 control-label">交易金额：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transAmount"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">交易方式：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.payMethod"></p></div>
                            <label class="col-sm-2 control-label">交易状态：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transStatus | formatDropping:transStatus"></p></div>
                            <label class="col-sm-2 control-label">卡种：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.cardType"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">机具类型：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.orderServiceCode | formatDropping:orderServices"></p></div>
                            <label class="col-sm-2 control-label">调单类型：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.orderTypeCode"></p></div>
							<label class="col-sm-2 control-label">回复状态：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="info.replyStatus | formatDropping:replyStatuses"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">发起时间：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.createTime"></p></div>
                            <label class="col-sm-2 control-label">回复截止时间：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.replyEndTime"></p></div>
                        </div>
						<div class="form-group">
							<label class="col-sm-2 control-label">调单备注：</label>
							<div class="col-sm-7">
								<textarea  class="form-control" rows="4" cols="15"  readonly ng-bind="info.orderRemark"></textarea>
							</div>
						</div>
                        <div class="form-group" >
							<label class="col-sm-2 control-label" >调单模版下载:</label>
							<div class="col-sm-10">
								<div ng-repeat="item in info.templateList track by $index" >
									<div class="templateStyle">
										<a ng-click="updateFile(item)" style="">{{item}}</a>
									</div>
								</div>
							</div>
                        </div>

					</div>
				</div>
				
				<div class="panel-body ibox float-e-margins">

					<div class="ibox-title">
						<h5>调单处理</h5>
					</div>
					<div class="ibox-content">

						<div class="form-group">
							<label class="col-sm-2 control-label">处理状态：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="info.dealStatus |formatDropping:dealStatuses"></p></div>
						</div>
						<div class="form-group" ng-show="info.dealStatus==8">
							<label class="col-sm-2 control-label">备注说明：</label>
							<div class="col-sm-7">
								<textarea class="form-control" rows="4" cols="15" readonly ng-bind="info.dealRemark"></textarea>
							</div>
						</div>
					</div>
					
				</div>
				
				<div class="panel-body ibox float-e-margins">

                    <div class="ibox-title">
                        <h5>调单回复</h5>
                        <div style="margin-left:100px;">
                            <a ng-click="openReplyModal()">{{replyTitle}}</a>
                        </div>
                    </div>
					<div class="ibox-content">
						<div class="form-group">
							<label class="col-sm-2 control-label">回复结果：</label>
							<div class="col-sm-2 checkbox" ng-bind="record.replyResult |formatDropping:replyResult"></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">商户姓名：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="record.merName"></p></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">持卡人姓名：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="record.cardPersonName"></p></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">持卡人电话：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="record.cardPersonMobile"></p></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">真实商户名称：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="record.realName"></p></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">归属省市：</label>
							<div class="col-sm-2 checkbox"><p>{{record.province}}&nbsp;&nbsp;&nbsp;&nbsp;{{record.city}}</p></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">真实交易地址：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="record.transAddress"></p></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">商户电话：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="record.merMobile"></p></div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" >附件下载:</label>
							<div class="col-sm-10">
								<div ng-repeat="item in record.fileList track by $index" >
									<div class="templateStyle">
										<a ng-click="updateFile(item)" style="">{{item}}</a>
									</div>
								</div>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label">调单回复：</label>
							<div class="col-sm-7">
								<textarea class="form-control" rows="4" cols="15" readonly ng-bind="record.replyRemark"></textarea>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">回复时间：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="record.createTime | date:'yyyy-MM-dd HH:mm:ss'"></p></div>
						</div>


						<div class="form-group">
							<div class="col-lg-12" style="padding: 30px; ">
								<label class="col-sm-2 control-label"></label>
								<a class="btn btn-primary4" ui-sref="riskControlManagement.surveyOrder" id="btnSubmit2">返回</a>
							</div>
						</div>
						
					</div>
					
				</div>
				
			</div>
		</div>
	</form>

	<div id="replyModal" class="modal fade form-horizontal" tabindex="4" role="dialog">
		<div class="modal-dialog" style="height:800px;width: 1200px">
			<div class="modal-content" >
				<form class="form-horizontal" name="horizontalCard"  novalidate>
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">
							&times;</button>
						<h3 class="modal-title">调单回复记录</h3>
					</div>
					<div class="modal-body">
						<div ng-repeat="item in replyList track by $index">
							<div class="form-group">
								<label class="col-sm-2 control-label" >回复结果:</label>
								<div class="col-sm-2 checkbox" ng-bind="item.replyResult | formatDropping:replyResult"></div>
								<label class="col-sm-2 control-label" >商户姓名:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.merName"></p></div>
								<label class="col-sm-2 control-label" >持卡人姓名:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.cardPersonName"></p></div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label" >持卡人电话:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.cardPersonMobile"></p></div>
								<label class="col-sm-2 control-label" >真实商户名称:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.merName"></p></div>
								<label class="col-sm-2 control-label" >归属省市:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.province+' '+info.reply.city"></p></div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label" >真实交易地址:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.transAddress"></p></div>
								<label class="col-sm-2 control-label" >商户电话:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.merMobile"></p></div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label" >回复时间:</label>
								<div class="col-sm-2 checkbox" ng-bind="item.createTime | date:'yyyy-MM-dd HH:mm:ss'"></div>
								<label class="col-sm-2 control-label" >回复代理商编号:</label>
								<div class="col-sm-2 checkbox"><p ng-bind="item.replyRoleNo"></p></div>
							</div>
							<div class="form-group" ng-show="item.lastDealStatus==8">
								<label class="col-sm-2 control-label">备注说明：</label>
								<div class="col-sm-7">
									<textarea class="form-control" rows="4" cols="15" readonly ng-bind="item.lastDealRemark"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">调单回复：</label>
								<div class="col-sm-7">
									<textarea class="form-control" rows="4" cols="15" readonly ng-bind="item.replyRemark"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label" >附件下载:</label>
								<div class="col-sm-10">
									<div ng-repeat="item1 in item.fileList track by $index" >
										<div class="templateStyle">
											<a ng-click="updateFile(item1)" style="">{{item1}}</a>
										</div>
									</div>
								</div>
							</div>
							<div class="form-group"  ng-if="$index!=info.replyList.length-1">
								<label class="col-sm-1 control-label" ></label>
								<div class="col-sm-11">
									<div style=" border-bottom: 1px solid #000000;"></div>
								</div>
							</div>

						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

</div>
