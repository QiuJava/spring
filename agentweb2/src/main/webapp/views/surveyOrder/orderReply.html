<!-- 导航URL -->
<div class="row wrapper border-bottom white-bg page-heading">
	<div class="col-md-12">
		<ol class="breadcrumb">
			<li><a href="#/service/addService">主页</a></li>
			<li><a>调单管理</a></li>
			<li class="active"><strong>调单回复</strong></li>
		</ol>
	</div>
</div>
<style>
	.templateStyle{
		margin-left:20px;
		margin-top:7px;
		float: left;
	}
</style>

<!-- 主要内容 -->
<div class="wrapper wrapper-content animated fadeIn" ng-app
	ng-controller="orderReplyCtrl" ng-init="orderInfo()" >
	<form class="form-horizontal" id="form1" name="horizontal">
		<div class="row">
			<div class="col-lg-12">
				<div class="panel-body ibox float-e-margins">

					<div class="ibox-title">
						<h5>调单信息</h5>
					</div>
					<div class="ibox-content">

                        <div class="form-group">
                            <label class="col-sm-2 control-label">商户编号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.merchantNo"></p></div>
                            <label class="col-sm-2 control-label">商户名称：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.merchantName"></p></div>
                            <label class="col-sm-2 control-label">商户手机号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.mobilephone"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">订单编号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transOrderNo"></p></div>
                            <label class="col-sm-2 control-label">系统参考号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.acqReferenceNo"></p></div>
                            <label class="col-sm-2 control-label">交易流水号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.serialNo"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">交易卡号：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transAccountNo"></p></div>
                            <label class="col-sm-2 control-label">发卡行：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.bankName"></p></div>
                            <label class="col-sm-2 control-label">交易金额：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transAmount"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">交易方式：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.payMethod"></p></div>
                            <label class="col-sm-2 control-label">交易状态：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.transStatus | formatDropping:transStatus"></p></div>
                            <label class="col-sm-2 control-label">卡种：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.cardType"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">机具类型：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.orderServiceCode"></p></div>
                            <label class="col-sm-2 control-label">调单类型：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.orderTypeCode"></p></div>
							<label class="col-sm-2 control-label">回复状态：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="info.replyStatus | formatDropping:replyStatuses"></p></div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">发起时间：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.createTime"></p></div>
                            <label class="col-sm-2 control-label">回复截止时间：</label>
                            <div class="col-sm-2 checkbox"><p ng-bind="info.replyEndTime"></p></div>
                        </div>
						<div class="form-group">
							<label class="col-sm-2 control-label">调单备注：</label>
							<div class="col-sm-7">
								<textarea class="form-control" rows="4" cols="15" readonly ng-bind="info.orderRemark"></textarea>
							</div>
						</div>
                        <div class="form-group" >
							<label class="col-sm-2 control-label" >调单模版下载:</label>
							<div class="col-sm-10">
								<div ng-repeat="item in info.templateList" >
									<div class="templateStyle">
										<a ng-click="updateFile(item)" style="">{{item}}</a>
									</div>
								</div>
							</div>
                        </div>

					</div>
				</div>
				
				<div class="panel-body ibox float-e-margins">

					<div class="ibox-title">
						<h5>调单处理</h5>
					</div>
					<div class="ibox-content">

						<div class="form-group">
							<label class="col-sm-2 control-label">处理状态：</label>
							<div class="col-sm-2 checkbox"><p ng-bind="info.dealStatus |formatDropping:dealStatuses"></p></div>
						</div>
						<div class="form-group" ng-show="info.dealStatus==8">
							<label class="col-sm-2 control-label">备注说明：</label>
							<div class="col-sm-7">
								<textarea class="form-control" rows="4" cols="15"  readonly ng-bind="info.dealRemark"></textarea>
							</div>
						</div>
					</div>
					
				</div>
				
				<div class="panel-body ibox float-e-margins">

					<div class="ibox-title">
						<h5>调单回复</h5>
					</div>
					<div class="ibox-content">
						<div class="form-group">
							<label class="col-sm-2 control-label">回复结果：</label><i style="margin-top: 10px" class="red_req">*</i>
							<div class="col-sm-3">
								<select class="form-control" ng-model="record.replyResult" ng-options="x.value as x.text for x in replyResult" >
									<option value="" selected>全部</option>
								</select>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">商户姓名：</label><i style="margin-top: 10px" class="red_req">*</i>
							<div class="col-sm-2">
								<input type="text" class="form-control" ng-model="record.merName" >
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">持卡人姓名：</label>
							<div class="col-sm-2">
								<input type="text" class="form-control" ng-model="record.cardPersonName" >
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">持卡人电话：</label>
							<div class="col-sm-2">
								<input type="text" class="form-control" ng-model="record.cardPersonMobile" >
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">真实商户名称：</label>
							<div class="col-sm-2">
								<input type="text" class="form-control" ng-model="record.realName" >
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">归属省市：</label><i style="margin-top: 10px" class="red_req">*</i>
							<div class="col-sm-2">
								<select required class="form-control input-s-sm inline" ng-model="record.province" ng-change="getCitiess()"
										ng-options="x.name as x.name for x in provinceGroups" />
							</div>
							<div class="col-sm-2">
								<select required class="form-control input-s-sm inline" ng-model="record.city"
										ng-options="x.name as x.name for x in cityGroups" />
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">真实交易地址：</label><i style="margin-top: 10px" class="red_req">*</i>
							<div class="col-sm-2">
								<input type="text" class="form-control" ng-model="record.transAddress" >
							</div>
							<div style="margin-top: -18px;">&nbsp;&nbsp;&nbsp;&nbsp;（地址需详细到具体街道和门牌号）</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">商户电话：</label><i style="margin-top: 10px" class="red_req">*</i>
							<div class="col-sm-2">
								<input type="text" class="form-control" ng-model="record.merMobile" >
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">上传附件：</label>
							<div class="col-sm-3 checkbox ">
								<input type="file" nv-file-select="" ng-model="fileSelect" uploader="uploader" multiple/>
								<table class="table">
									<tbody>
									<tr ng-repeat="item in uploader.queue">
										<td>
											<strong>{{ item.file.name }}</strong>
										</td>
										<td nowrap>
											<button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
												<span class="glyphicon glyphicon-trash"></span>删除
											</button>
										</td>
									</tr>
									</tbody>
								</table>
								<div ng-repeat="item in oldTemplateList">
									<div style="margin-top: 7px;">
										<a ng-click="updateFile(item)">{{item}}</a>
										<button style="margin-left: 10px" ng-click="delete($event,item)">删除</button>
									</div>
								</div>
								<div>
									最多上传6个附件
								</div>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label">调单回复：</label>
							<div class="col-sm-7">
								<textarea class="form-control" rows="4" cols="15"  ng-model="record.replyRemark"></textarea>
							</div>
							<div>（100字以内）</div>
						</div>

						<div class="form-group" style="margin-left: 200px">
							<div class="col-lg-12" style="padding: 30px; ">
								<button class="btn btn-primary" type="button" ng-click="submit()" ng-disabled="submitting">提交</button>
								<a style="margin-left: 20px" class="btn btn-primary4" ui-sref="riskControlManagement.surveyOrder" id="btnSubmit2">返回</a>
							</div>
						</div>
						
					</div>
					
				</div>
				
			</div>
		</div>
	</form>
</div>
